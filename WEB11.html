<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LaCoast Data Solution</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap');

  /* Reset and base styles */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background-color: #fff;
    color: #b71c1c;
    line-height: 1.6;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  a {
    color: #b71c1c;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }

  header {
    background-color: #b71c1c;
    color: white;
    padding: 1.25rem 2rem 1rem 2rem;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 4px 4px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.7rem;
  }

  .branding {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }
  .branding svg {
    width: 56px;
    height: 56px;
    vertical-align: middle;
  }

  header h1 {
    margin: 0;
    font-weight: 700;
    font-size: 2rem;
  }

  nav {
    width: 100%;
  }
  nav ul {
    display: flex;
    justify-content: center;
    padding: 0;
    margin: 0;
    list-style: none;
    gap: 1.8rem;
    flex-wrap: wrap;
  }
  nav li {
    font-weight: 600;
    font-size: 1.15rem;
  }
  nav a {
    color: white;
    transition: color 0.3s ease;
  }
  nav a:hover {
    text-decoration: underline;
    color: #ffebee;
  }
  nav li.active a {
    border-bottom: 2px solid #fff;
    padding-bottom: 2px;
  }

  main {
    flex: 1;
    max-width: 1100px;
    margin: 2rem auto 4rem auto;
    padding: 0 1rem;
  }

  /* Sections and rest of styles remain unchanged... */
  /* ... keep all your other CSS from before ... */
</style>
</head>
<body>
<header role="banner" aria-label="Website header with logo and navigation">
  <div class="branding">
    <!-- White Bar graph logo SVG -->
    <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80" role="img" aria-label="LaCoast bar graph logo">
      <rect fill="#ffffff" x="8" y="36" width="12" height="36" rx="3" ry="3"/>
      <rect fill="#ffffff" x="28" y="20" width="12" height="52" rx="3" ry="3"/>
      <rect fill="#ffffff" x="48" y="28" width="12" height="44" rx="3" ry="3"/>
      <rect fill="#ffffff" x="68" y="12" width="12" height="60" rx="3" ry="3"/>
    </svg>
    <h1>LaCoast Data Solution</h1>
  </div>
  <nav role="navigation" aria-label="Primary navigation">
    <ul id="nav-list">
      <li class="active"><a href="#" data-section="homepage">Home</a></li>
      <li><a href="#" data-section="about">About</a></li>
      <li><a href="#" data-section="news">News</a></li>
      <li><a href="#" data-section="career">Career</a></li>
      <li><a href="#" data-section="project-samples">Project Samples</a></li>
      <li><a href="#" data-section="contacts">Contacts</a></li>
    </ul>
  </nav>
</header>
<main>
  <!-- Homepage Section -->
  <section id="homepage" class="content-section" tabindex="0">
    <h2>Welcome to LaCoast Data Solution</h2>
    <p>Your trusted partner for cutting-edge data solutions designed for data scientists and analysts to unlock insights and power decisions.</p>
  </section>

  <!-- About Section -->
  <section id="about" class="content-section" style="display:none" tabindex="0">
    <h2>About Us</h2>
    <p>LaCoast Data Solution is a specialized data solutions company dedicated to providing innovative tools and services to data scientists to help them excel at data management, analysis, and insight generation. We believe data-driven decisions pave way to the future.</p>
  </section>

  <!-- News Section -->
  <section id="news" class="content-section" style="display:none" tabindex="0">
    <h2>News & Updates</h2>
    <div id="news-list">
      <div class="news-item">
        <div class="news-title">LaCoast launches new AI-driven analytics platform</div>
        <div class="news-desc">We are excited to announce the launch of our AI analytics platform offering deep insights with automated reporting.</div>
      </div>
      <div class="news-item">
        <div class="news-title">New career opportunities available</div>
        <div class="news-desc">LaCoast is seeking passionate data scientists and developers to join our growing team.</div>
      </div>
    </div>
  </section>

  <!-- Career Section -->
  <section id="career" class="content-section" style="display:none" tabindex="0">
    <h2>Career Opportunities</h2>
    <div id="career-list">
      <div class="career-item">
        <div class="career-title">Senior Data Scientist</div>
        <div class="career-desc">Looking for expert data scientists experienced in machine learning models, data pipelines, and visualization tools.</div>
      </div>
      <div class="career-item">
        <div class="career-title">Data Engineer</div>
        <div class="career-desc">Seeking a skilled data engineer to build and maintain scalable data infrastructure for our analytics products.</div>
      </div>
    </div>
  </section>

  <!-- Project Samples Section -->
  <section id="project-samples" class="content-section" style="display:none" tabindex="0">
    <h2>Project Samples</h2>
    <button id="add-project-btn" aria-expanded="false" aria-controls="add-project-form" aria-label="Add new project">+ Add New Project</button>

    <form id="add-project-form" aria-hidden="true" tabindex="-1">
      <div class="form-control">
        <label for="project-title">Project Title</label>
        <input type="text" id="project-title" name="projectTitle" required maxlength="100" />
      </div>
      <div class="form-control">
        <label for="project-description">Project Description</label>
        <textarea id="project-description" name="projectDescription" rows="4" required maxlength="1000"></textarea>
      </div>
      <input type="submit" value="Add Project" />
      <button type="button" id="cancel-add-project">Cancel</button>
    </form>

    <div id="projects-list" aria-live="polite" aria-relevant="additions removals"></div>
  </section>

  <!-- Contacts Section -->
  <section id="contacts" class="content-section" style="display:none" tabindex="0">
    <h2>Contact Us</h2>
    <p>Phone: <a href="tel:+254712840569">+254712840569</a>, <a href="tel:+254735721087">+254735721087</a></p>
    <p>Email: <a href="mailto:rayanslim9@gmail.com">rayanslim9@gmail.com</a></p>

    <h3>Send us a message</h3>
    <form id="contact-form" novalidate>
      <div class="form-control">
        <label for="contact-name">Name</label>
        <input type="text" id="contact-name" name="contactName" required maxlength="50" />
      </div>
      <div class="form-control">
        <label for="contact-email">Email</label>
        <input type="email" id="contact-email" name="contactEmail" required />
      </div>
      <div class="form-control">
        <label for="contact-message">Message</label>
        <textarea id="contact-message" name="contactMessage" rows="5" required maxlength="500"></textarea>
      </div>
      <input type="submit" value="Send Message" />
      <div id="contact-feedback" role="alert" aria-live="assertive" style="margin-top:0.5rem;"></div>
    </form>
  </section>
</main>

<script>
  (() => {
    'use strict';

    // Page Navigation and highlighting
    const navList = document.getElementById('nav-list');
    const sections = document.querySelectorAll('.content-section');

    function setActiveNav(sectionId) {
      navList.querySelectorAll('li').forEach(li => {
        li.classList.toggle('active', li.querySelector('a').dataset.section === sectionId);
      });
    }

    function showSection(sectionId) {
      sections.forEach(sec => {
        sec.style.display = sec.id === sectionId ? 'block' : 'none';
      });
      setActiveNav(sectionId);
      document.getElementById(sectionId).focus();
    }

    navList.addEventListener('click', e => {
      if (e.target.tagName === 'A') {
        e.preventDefault();
        const sec = e.target.dataset.section;
        if (sec) showSection(sec);
      }
    });

    // Show homepage on load
    showSection('homepage');

    const PROJECTS_KEY = 'lacoast_projects';

    function generateId() {
      return '_' + Math.random().toString(36).substr(2, 9);
    }

    const projectsList = document.getElementById('projects-list');
    const addProjectBtn = document.getElementById('add-project-btn');
    const addProjectForm = document.getElementById('add-project-form');
    const cancelAddProject = document.getElementById('cancel-add-project');

    addProjectBtn.addEventListener('click', () => {
      const shown = addProjectForm.classList.toggle('show');
      addProjectBtn.setAttribute('aria-expanded', shown);
      addProjectForm.setAttribute('aria-hidden', !shown);
      if (shown) {
        addProjectForm.querySelector('#project-title').focus();
      }
    });
    cancelAddProject.addEventListener('click', () => {
      addProjectForm.classList.remove('show');
      addProjectBtn.setAttribute('aria-expanded', false);
      addProjectForm.setAttribute('aria-hidden', true);
      addProjectForm.reset();
    });

    function saveProjects(projects) {
      localStorage.setItem(PROJECTS_KEY, JSON.stringify(projects));
    }
    function loadProjects() {
      const data = localStorage.getItem(PROJECTS_KEY);
      if (!data) return [];
      try {
        return JSON.parse(data);
      } catch {
        return [];
      }
    }

    function renderProjects() {
      let projects = loadProjects();
      if (projects.length === 0) {
        projectsList.innerHTML = '<p>No projects posted yet. Use the "Add New Project" button above to post.</p>';
        return;
      }
      function renderComments(comments, projectId, parentId = null) {
        if (!comments || !comments.length) return '';
        let filteredComments = parentId === null ? comments.filter(c => !c.parentId) : comments.filter(c => c.parentId === parentId);
        if (filteredComments.length === 0) return '';
        let html = '<div class="comments">';
        filteredComments.forEach(comment => {
          const likes = comment.likes || 0;
          const repliesCount = comments.filter(c => c.parentId === comment.id).length;
          html += `
          <div class="comment" data-comment-id="${comment.id}" data-project-id="${projectId}" aria-label="Comment by ${escapeHtml(comment.user)}">
            <div class="comment-header">
              <span class="comment-author">${escapeHtml(comment.user)}</span>
              <span class="comment-actions">
                <button class="like-btn" aria-label="Like this comment" title="Like">&#x2764;</button> <span class="like-count">${likes}</span>
                <button class="reply-btn" aria-label="Reply to this comment" title="Reply">Reply (${repliesCount})</button>
              </span>
            </div>
            <div class="comment-content">${escapeHtml(comment.comment)}</div>
            <div class="reply-section">
              ${renderComments(comments, projectId, comment.id)}
              <form class="reply-form" style="display:none;" aria-label="Reply form">
                <div class="form-control">
                  <label for="reply-user-${comment.id}">Your Name</label>
                  <input id="reply-user-${comment.id}" type="text" name="replyUser" required maxlength="50" />
                </div>
                <div class="form-control">
                  <label for="reply-text-${comment.id}">Reply</label>
                  <textarea id="reply-text-${comment.id}" name="replyText" rows="2" required maxlength="350"></textarea>
                </div>
                <button type="submit">Post Reply</button>
                <button type="button" class="cancel-reply-btn">Cancel</button>
              </form>
            </div>
          </div>`;
        });
        html += '</div>';
        return html;
      }
      projectsList.innerHTML = projects.map(project => `
        <article class="project" data-project-id="${project.id}">
          <h3 class="project-title">${escapeHtml(project.title)}</h3>
          <p class="project-desc">${escapeHtml(project.description)}</p>
          <div class="comments-section">
            <h4>Comments</h4>
            <form class="comment-form" aria-label="Add a comment for ${escapeHtml(project.title)}">
              <div class="form-control">
                <label for="comment-user-${project.id}">Name</label>
                <input id="comment-user-${project.id}" type="text" name="commentUser" required maxlength="50" />
              </div>
              <div class="form-control">
                <label for="comment-text-${project.id}">Comment</label>
                <textarea id="comment-text-${project.id}" name="commentText" rows="3" required maxlength="500"></textarea>
              </div>
              <button type="submit">Post Comment</button>
            </form>
            ${renderComments(project.comments, project.id)}
          </div>
        </article>
      `).join('');
    }
    function escapeHtml(text) {
      if (!text) return '';
      return text.replace(/[&<>"']/g, (m) => {
        switch(m) {
          case '&': return '&amp;';
          case '<': return '&lt;';
          case '>': return '&gt;';
          case '"': return '&quot;';
          case '\'': return '&#039;';
          default: return m;
        }
      });
    }

    projectsList.addEventListener('submit', e => {
      if (e.target.classList.contains('comment-form')) {
        e.preventDefault();
        const form = e.target;
        const projectId = form.closest('[data-project-id]').dataset.projectId;
        const user = form.commentUser.value.trim();
        const commentText = form.commentText.value.trim();
        if (!user || !commentText) return alert('Please fill both name and comment.');
        let projects = loadProjects();
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        if (!project.comments) project.comments = [];
        project.comments.push({id: generateId(), user, comment: commentText, likes: 0, parentId: null});
        saveProjects(projects);
        form.reset();
        renderProjects();
      }
      else if (e.target.classList.contains('reply-form')) {
        e.preventDefault();
        const form = e.target;
        const commentDiv = form.closest('.comment');
        const projectId = commentDiv.dataset.projectId;
        const commentId = commentDiv.dataset.commentId;
        const replyUser = form.replyUser.value.trim();
        const replyText = form.replyText.value.trim();
        if (!replyUser || !replyText) return alert('Please fill both name and reply text.');
        let projects = loadProjects();
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        if (!project.comments) project.comments = [];
        project.comments.push({id: generateId(), user: replyUser, comment: replyText, likes: 0, parentId: commentId});
        saveProjects(projects);
        renderProjects();
      }
    });
    projectsList.addEventListener('click', e => {
      if (e.target.classList.contains('like-btn')) {
        const commentDiv = e.target.closest('.comment');
        const projectId = commentDiv.dataset.projectId;
        const commentId = commentDiv.dataset.commentId;
        let projects = loadProjects();
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        const comment = project.comments.find(c => c.id === commentId);
        if (!comment) return;
        comment.likes = (comment.likes || 0) + 1;
        saveProjects(projects);
        renderProjects();
      }
      else if (e.target.classList.contains('reply-btn')) {
        const commentDiv = e.target.closest('.comment');
        if (!commentDiv) return;
        const replyForm = commentDiv.querySelector('.reply-form');
        if (!replyForm) return;
        if (replyForm.style.display === 'block') {
          replyForm.style.display = 'none';
        } else {
          const allReplyForms = projectsList.querySelectorAll('.reply-form');
          allReplyForms.forEach(f => f.style.display = 'none');
          replyForm.style.display = 'block';
          replyForm.replyUser.focus();
        }
      }
      else if (e.target.classList.contains('cancel-reply-btn')) {
        const replyForm = e.target.closest('.reply-form');
        if (replyForm) {
          replyForm.style.display = 'none';
          replyForm.reset();
        }
      }
    });
    addProjectForm.addEventListener('submit', e => {
      e.preventDefault();
      const title = e.target['projectTitle'].value.trim();
      const description = e.target['projectDescription'].value.trim();
      if (!title || !description) return alert('Please fill both title and description.');
      let projects = loadProjects();
      projects.unshift({
        id: generateId(),
        title: title,
        description: description,
        comments: []
      });
      saveProjects(projects);
      addProjectForm.reset();
      addProjectForm.classList.remove('show');
      addProjectBtn.setAttribute('aria-expanded', false);
      addProjectForm.setAttribute('aria-hidden', true);
      renderProjects();
      showSection('project-samples');
    });

    const contactForm = document.getElementById('contact-form');
    const contactFeedback = document.getElementById('contact-feedback');
    contactForm.addEventListener('submit', e => {
      e.preventDefault();
      const name = contactForm['contactName'].value.trim();
      const email = contactForm['contactEmail'].value.trim();
      const message = contactForm['contactMessage'].value.trim();
      if (!name || !email || !message) {
        contactFeedback.textContent = 'Please fill in all fields.';
        contactFeedback.style.color = '#b71c1c';
        return;
      }
      const emailRegex = /^[^@]+@[^@]+\.[^@]+$/;
      if (!emailRegex.test(email)) {
        contactFeedback.textContent = 'Please enter a valid email address.';
        contactFeedback.style.color = '#b71c1c';
        return;
      }
      contactFeedback.textContent = 'Thank you for contacting us! We will get back to you soon.';
      contactFeedback.style.color = '#2e7d32';
      contactForm.reset();
      setTimeout(() => {
        contactFeedback.textContent = '';
      }, 6000);
    });
    renderProjects();
  })();
</script>
</body>
</html>
